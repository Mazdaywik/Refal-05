# –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –†–µ—Ñ–∞–ª–∞-05-Unicode

## –û —è–∑—ã–∫–µ –∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–µ

**–†–µ—Ñ–∞–ª-05-Unicode** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –†–µ—Ñ–∞–ª–∞-05 —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Unicode —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É ICU (International Components for Unicode). –≠—Ç–æ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ –†–µ—Ñ–∞–ª–∞-5 –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –†–µ—Ñ–∞–ª–∞-5, –∫–æ–º–ø–∏–ª–∏—Ä—É—é—â–∞—è—Å—è –≤ C89 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Unicode.

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Unicode

* **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å–æ –≤—Å–µ–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ Unicode, –≤–∫–ª—é—á–∞—è —ç–º–æ–¥–∑–∏, —Å–∏–º–≤–æ–ª—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∏—Å—å–º–µ–Ω–Ω–æ—Å—Ç–µ–π (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞, –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã, –∞—Ä–∞–±—Å–∫–∞—è –≤—è–∑—å –∏ —Ç.–¥.)
* **–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ UTF-8** ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –≤–≤–æ–¥/–≤—ã–≤–æ–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-8
* **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** ‚Äî `Chr`, `Ord`, `Type`, `Upper`, `Lower` —Ä–∞–±–æ—Ç–∞—é—Ç —Å Unicode
* **–®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–ø–∏—Å–∏ `0x4E2D` –¥–ª—è Unicode —Å–∏–º–≤–æ–ª–æ–≤
* **–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** ‚Äî `ChrHex` –∏ `OrdHex` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–º–∏ –∫–æ–¥–∞–º–∏
* **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ICU** ‚Äî –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º —Å–∏–º–≤–æ–ª–æ–≤, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é —Å–∫—Ä–∏–ø—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### Unicode —Å—Ç—Ä–æ–∫–∏
```refal
$ENTRY GO {
  = <Prout '–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!'>     * –†—É—Å—Å–∫–∏–π
    <Prout '‰Ω†Â•Ω‰∏ñÁïå'>          * –ö–∏—Ç–∞–π—Å–∫–∏–π
    <Prout 'ŸÖÿ±ÿ≠ÿ®ÿß ÿ®ÿßŸÑÿπÿßŸÑŸÖ'>    * –ê—Ä–∞–±—Å–∫–∏–π
    <Prout 'üåçüåéüåè'>           * –≠–º–æ–¥–∑–∏
}
```

#### –†–∞–±–æ—Ç–∞ —Å Unicode —Å–∏–º–≤–æ–ª–∞–º–∏
```refal
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π
TestHex {
  = <Prout <Chr 0x4E2D>>        * –í—ã–≤–æ–¥–∏—Ç: ‰∏≠ (0x4E2D = 20013)
    <Prout <Chr 20013>>         * –í—ã–≤–æ–¥–∏—Ç: ‰∏≠ (—Ç–æ –∂–µ —Å–∞–º–æ–µ)
    <Prout <ChrHex '0x4E2D'>>   * –í—ã–≤–æ–¥–∏—Ç: ‰∏≠ (–∏—Å–ø–æ–ª—å–∑—É—è ChrHex)
    <Prout <Ord '–ñ'>>           * –í—ã–≤–æ–¥–∏—Ç: 1046
    <Prout <OrdHex '–ñ'>>        * –í—ã–≤–æ–¥–∏—Ç: 0x416
}

* –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ Unicode
TestCase {
  s.Char = <Prout <Upper s.Char>> <Prout <Lower s.Char>>;
}
```

#### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
```refal
* Type —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Unicode –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
CheckType {
  s.Char = <Type s.Char> : 
    {
      'L' s.SubType s.Char = <Prout s.Char ' is a letter'>;
      'D0' s.Digit = <Prout s.Digit ' is a digit'>;
      s.Type s.Char = <Prout s.Char ' has type ' s.Type>;
    }
}
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
* –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä C89
* –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ ICU (International Components for Unicode)
* –†–µ—Ñ–∞–ª-5Œª –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–π —Ä–∞—Å–∫—Ä—É—Ç–∫–∏

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ICU

**–ù–∞ macOS:**
```bash
brew install icu4c
```

**–ù–∞ Ubuntu/Debian:**
```bash
sudo apt-get install libicu-dev
```

**–ù–∞ –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö:**
–ü–æ—Å–µ—Ç–∏—Ç–µ [—Å–∞–π—Ç ICU](http://site.icu-project.org/) –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ.

#### –†–∞—Å–∫—Ä—É—Ç–∫–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./bootstrap-unicode.sh` (Linux/macOS) –∏–ª–∏ `bootstrap.bat` (Windows)
3. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –Ω–∞–ª–∏—á–∏–µ ICU –∏ –≤–∫–ª—é—á–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É Unicode

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

* **–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**: UTF-32 –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤
* **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ASCII**: —Å–∏–º–≤–æ–ª—ã < 128 –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞—Ä–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
* **–ù–æ–≤—ã–π —Ç–∏–ø —É–∑–ª–∞**: `R05_DATATAG_UNICODE` –¥–ª—è —Å–∏–º–≤–æ–ª–æ–≤ Unicode
* **ICU –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `r05-unicode.h/c` –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º Unicode

### –û—Ç–ª–∏—á–∏—è –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –†–µ—Ñ–∞–ª–∞-05

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ Unicode (–Ω–µ —Ç–æ–ª—å–∫–æ ASCII)
* –®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã (`0x` –ø—Ä–µ—Ñ–∏–∫—Å)
* –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Unicode
* –¢—Ä–µ–±—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ ICU –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ä–∞–±–æ—Ç—ã

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

* –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –†–µ—Ñ–∞–ª-05
* –ü—Ä–æ–≥—Ä–∞–º–º—ã –±–µ–∑ Unicode —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
* –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ICU –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ç–æ–ª—å–∫–æ ASCII

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º

–°–º. –ø–∞–ø–∫—É `tests/` –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤:
* `test-unicode-hello.ref` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
* `test-unicode-strings.ref` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å Unicode —Å—Ç—Ä–æ–∫–∞–º–∏
* `test-hex-literals.ref` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤

### –õ–∏—Ü–µ–Ω–∑–∏—è

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –¥–≤—É—Ö–ø—É–Ω–∫—Ç–Ω–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏ BSD —Å –æ–≥–æ–≤–æ—Ä–∫–æ–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Ä–∞–Ω—Ç–∞–π–º–∞.

### –ê–≤—Ç–æ—Ä—ã

* **–†–µ—Ñ–∞–ª-05**: –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö–æ–Ω–æ–≤–∞–ª–æ–≤ ([@Mazdaywik](https://github.com/Mazdaywik))
* **Unicode —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ**: –î–∞–Ω—Å–ª–∞–≤ –°–ª–∞–≤–µ–Ω—Å–∫–æ–π

### –°–º. —Ç–∞–∫–∂–µ

* [–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –†–µ—Ñ–∞–ª-05](https://github.com/Mazdaywik/Refal-05)
* [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ICU](http://userguide.icu-project.org/)
* [Unicode —Å—Ç–∞–Ω–¥–∞—Ä—Ç](https://www.unicode.org/)